"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.generateUsername = exports.generateFromEmail = void 0;
const nouns = require("./data/nouns.json");
const adjectives = require("./data/adjectives.json");
const crypto = require("crypto");
const randomNumber = (maxNumber) => {
    let randomNumberString;
    switch (maxNumber) {
        case 1:
            randomNumberString = crypto.randomInt(1, 9).toString();
            break;
        case 2:
            randomNumberString = crypto.randomInt(10, 90).toString();
            break;
        case 3:
            randomNumberString = crypto.randomInt(100, 900).toString();
            break;
        case 4:
            randomNumberString = crypto.randomInt(1000, 9000).toString();
            break;
        case 5:
            randomNumberString = crypto.randomInt(10000, 90000).toString();
            break;
        case 6:
            randomNumberString = crypto.randomInt(100000, 900000).toString();
            break;
        default:
            randomNumberString = "";
            break;
    }
    return randomNumberString;
};
function generateFromEmail(email, randomDigits) {
    // Retrive name from email address
    const nameParts = email.replace(/^(.+)@(.+)$/g, "$1");
    // Replace all special characters like "@ . _";
    const name = nameParts.replace(/[&/\\#,+()$~%._@'":*?<>{}]/g, "");
    // Create and return unique username
    return name + randomNumber(randomDigits);
}
exports.generateFromEmail = generateFromEmail;
function generateUsername(separator, randomDigits, length) {
    const noun = nouns[Math.floor(Math.random() * nouns.length)];
    const adjective = adjectives[Math.floor(Math.random() * adjectives.length)];
    let username;
    // Create unique username
    if (separator) {
        username = noun + separator + adjective + randomNumber(randomDigits);
    }
    else {
        username = noun + adjective + randomNumber(randomDigits);
    }
    if (length) {
        return username.substring(0, length);
    }
    return username;
}
exports.generateUsername = generateUsername;
